<!doctype html><html lang=en><head><title>Replacing a hardware switch with a transistor</title><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><link href=/fonts.css rel=stylesheet><link href=/style.css rel=stylesheet><body><main><nav><ul><li><a href=/>/index</a><li><a href=/b/>/blog</a><li><a href=https://github.com/xarkes>/github</a><li><a href=https://x.com/xarkes_>/x</a></ul></nav><div><h1>Replacing a hardware switch with a transistor</h1><p><strong>Published on 2024-08-08</strong><p>I recently decided to weekly backup some important data. In order to do so, I took an old dusty laptop from the shelf and configured it to wake up with a <a href=https://en.wikipedia.org/wiki/Wake-on-LAN>Wake-On-LAN</a> packet and bought a SATA to USB adapter to plug in an external hard drive.<p>My typical hard drives are 3.5 inches disks which require both 5V and 12V as power input, hence why most adapters will provide a USB input to do the data transfer and an extra power plug for the 12V. Things would be easier with 2.5" drives (either mechanical or SSD) as they can be powered only with the 5V from USB.<p>The issue I've been facing was that when the laptop finished copying data and went to sleep the hard drive would still be powered, and the only way to turn it off is to manually switch the power button on the disk adapter… how convenient for an automated backup solution.<p>This was unacceptable and I could not understand why would anyone power on the disk plugged to the adapter if no USB was connected to it. It is still a mistery, but I quickly thought I could easily hack it to only turn on the 12V power when there is any activity on the USB port (ie. when the laptop is powered on!). That's how my quest to replace a hardware switch into an automated solution on a budget started.</p><span id=continue-reading></span><h2 id=scrapping>Scrapping</h2><p>I did not want to buy any component online, just scrap any transistor from whatever card I have and do something with it. And so it began, I found an old motherboard dead due to a lightning strike power surge many years ago, identified some transistors that seemed usable from their datasheet online (ie. have proper input voltages and <code>V(GS)</code>) and started unsoldering it:<p><img alt="Half-scrapped transistors on a motherboard showing my poor unsoldering skills" src=/img/elec/image.jpg><p>Did I forget to mention I only have a basic soldering iron and a cheap desoldering pump with me? You can see it's pretty much a failure so I decided to take things in hands:<p><img alt="A motherboard that was just cut with a Dremel rotary saw" src=/img/elec/image_h.jpg> <img alt="A piece of motherboard with two transistors and their pins soldered to wires" src=/img/elec/image_o.jpg><p>Thanks to my dear friend Dremel, it took me only a few minutes to get things ready.<h2 id=soldering-it-together>Soldering it together</h2><p>Here is a basic schema of the adapter card. The important thing here is that the hardware switch is physically very accessible, but on the schema it is located <em>before</em> the load.<p><img alt="Electronic schema of the current SATA adapter" src=/img/elec/image_v.jpg> <img alt="A photo of the SATA to USB adapter" src=/img/elec/image_1r.jpg><p>I wanted first to simply replace the switch itself with a transistor, but in my case I only had a N mosfet <a href=http://www.cheertech.com.tw/Niko-sem/Data%20sheet/P75N02LDG%20.pdf>P75N02LDG</a>. Thanks to this <a href=https://electronics.stackexchange.com/questions/676148/n-channel-as-high-side-switch-is-always-on/676150#676150>discussion</a> I figured out it would not be possible to do so with a transistor placed before the charge, and won't be able to make a high side switch.<p>So I needed to do place the transistor after the load, and use it as a low side switch, resulting in the following schema:<p><img alt="Electronic schema of the planned modifications for the SATA adapter" src=/img/elec/image_6.jpg><p>This sounded harder than simply replacing the switch with an already available plug, as I would need to find the place where all components go to ground and make it go through my transistor. The only way I found was to unsolder the power plug and place my transistor between the board ground and the power plug negative socket.<p><img alt="Front side of the SATA adapter with a soldered transistor acting as a low side switch" src=/img/elec/image_j.jpg> <img alt="Back side of the SATA adapter with a soldered transistor acting as a low side switch" src=/img/elec/image_z.jpg><p>Now the transistor's gate G (red) is soldered to the USB 5V, the drain D (green) is soldered to the card "ground" after all load, and the source S (yellow) is soldered to the power plug negative side. I also added a resistor between the gate and the source in order to make sure it deactivates when there is no more power on the USB side. Below is the final result:<p><img alt="Hacked SATA adapter plugged into a hard drive" src=/img/elec/image_8.jpg><p>Voila, now my hard drive turns off and on at the same time as my laptop!<p>Sources:<ul><li><a href="https://oscarliang.com/how-to-use-mosfet-beginner-tutorial/#:~:text=For%20an%20N%2Dchannel%20MOSFET,Source%20and%20Drain%20than%20expected.">https://oscarliang.com/how-to-use-mosfet-beginner-tutorial/#:~:text=For%20an%20N%2Dchannel%20MOSFET,Source%20and%20Drain%20than%20expected.</a><li><a href=https://electronics.stackexchange.com/questions/676148/n-channel-as-high-side-switch-is-always-on/676150#676150>https://electronics.stackexchange.com/questions/676148/n-channel-as-high-side-switch-is-always-on/676150#676150</a></ul></div></main><footer>2024 - Antide Petit aka <a href=https://xarkes.com>xarkes</a> - <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC-BY-SA</a> - Made with ❤️</footer>